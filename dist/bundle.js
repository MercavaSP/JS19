(()=>{"use strict";const e=document.querySelector("menu"),t=document.querySelector("body");!function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds");function n(e){return e<10&&(e="0"+e),e}const a=setInterval((()=>{const e=function(){const e=(new Date("10 july 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();t.textContent=n(e.hours),o.textContent=n(e.minutes),r.textContent=n(e.seconds),e.timeRemaining<0&&(clearInterval(a),t.textContent="00",o.textContent="00",r.textContent="00")}),1e3)}(),(()=>{let o,r=-50,n=!1,a=()=>{o=requestAnimationFrame(a),r<0?(r++,e.style.transform=`translate(${2*r}%)`):cancelAnimationFrame(o)},s=()=>{e.style.transform="translate(-100%)",r=-50,n=!1,cancelAnimationFrame(o)},l=(t,l)=>{let c=t.target;c.closest(".menu")?(n=!0,l?e.style.transform&&"translate(0%)"===e.style.transform?s():o=requestAnimationFrame(a):e.style.transform&&"translate(0%)"===e.style.transform?s():(e.style.transform="translate(0%)",r=-50)):(c.closest("menu")&&c.closest("A")||!c.closest("menu")&&n)&&s()},c=e=>{l(e,!0)},i=e=>{l(e,!1)},m=[],u=()=>{m.push(setTimeout((()=>{m.forEach((e=>clearTimeout(e))),window.innerWidth>=768?(t.addEventListener("click",c),t.removeEventListener("click",i)):(t.addEventListener("click",i),t.removeEventListener("click",c))}),500))};window.addEventListener("resize",u),window.addEventListener("load",u)})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),r=document.querySelector(".popup-close");e.style.display="block",e.style.transform="translateY(-100%)",t.style.transform="translateX(-100%)";const n=r=>{t.style.transition=`${r}`,o.forEach((o=>o.addEventListener("click",(()=>{t.style.transform="translateX(0%)",e.style.transform="translateY(0%)"}))))},a=[],s=()=>{a.push(setTimeout((()=>{a.forEach((e=>clearTimeout(e))),window.innerWidth>=768?n("1s"):n("")}),500))};s(),window.addEventListener("resize",s),r.addEventListener("click",(()=>{e.style.transform="translateY(-100%)",t.style.transform="translateX(-100%)"}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let r=e.target;r=r.closest(".service-header-tab"),r.classList.contains("service-header-tab")&&t.forEach(((e,n)=>{e===r&&(e=>{for(let r=0;r<o.length;r++)e===r?(t[r].classList.add("active"),o[r].classList.remove("d-none")):(t[r].classList.remove("active"),o[r].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let r,n,a=0;const s=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},c=()=>{s(e,a,"portfolio-item-active"),s(n,a,"dot-active"),a++,a>=e.length&&(a=0),l(e,a,"portfolio-item-active"),l(n,a,"dot-active")},i=(e=3e3)=>{r=setInterval(c,e)};o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(s(e,a,"portfolio-item-active"),s(n,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),l(e,a,"portfolio-item-active"),l(n,a,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),(()=>{for(let o=0;o<e.length;o++){let e=document.createElement("li");e.classList.add("dot"),0===o&&e.classList.add("dot-active"),t.append(e)}n=document.querySelectorAll(".dot")})(),i(1500)})(),(()=>{const e=document.getElementById("command"),t=document.querySelector(".calc-block");e.addEventListener("mouseover",(e=>{const t=e.target;t.matches(".command__photo")&&(t.dataset.first=t.src,t.src=t.dataset.img)})),e.addEventListener("mouseout",(e=>{const t=e.target;t.matches(".command__photo")&&(t.src=t.dataset.first,t.removeAttribute("data-first"))})),t.addEventListener("input",(e=>{const t=e.target;t.matches("INPUT")&&(t.value=t.value.replace(/\D/,""))}))})(),(()=>{const e=document.querySelector("body");e.addEventListener("input",(e=>{const t=e.target;"insertFromPaste"!==e.inputType?t.matches("#form2-name,#form1-name")?t.value=t.value.replace(/[^а-я\s\-]/i,""):t.matches("#form2-email,#form1-email")?t.value=t.value.replace(/[^a-z\@\-\_\.\!\~\*\']/gi,""):t.matches("#form2-phone,#form1-phone")?t.value=t.value.replace(/[^\d\+]/g,""):t.value=t.value.replace(/[^а-я\s\d\.\,\?\!\;\:\(\)\"\-]/i,""):t.value=""})),e.addEventListener("focusout",(e=>{const t=e.target;if(t.value&&(t.matches("#form2-name,#form2-message,#form1-name")?(t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s{2,}/g," ")):t.matches("#form2-email,#form1-email")&&(t.value=t.value.replace(/^\-+|\-+$/g,""),t.value=t.value.replace(/\-{2,}/g,"-")),t.matches("#form2-name,#form1-name,#form3-name")&&t.value)){let e=t.value;e=e.split(" "),e.forEach(((t,o)=>e[o]=t[0].toUpperCase()+t.substring(1).toLowerCase())),e=e.join(" "),t.value=e}}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),s=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;l!==o&&l!==r&&l!==a&&l!==n||(()=>{let t=0,l=1,c=1;const i=o.options[o.selectedIndex].value,m=+r.value;n.value>1&&(l+=(n.value-1)/10),a.value&&a.value<5?c*=2:a.value&&a.value<10&&(c*=1.5),i&&m&&(t=e*i*m*l*c),s.textContent=t})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.classList.add("status-message");const o=()=>{const e=document.querySelector(".status-message");e&&setTimeout((()=>{e.remove()}),5e3)};e.forEach((e=>{e.addEventListener("input",(e=>{let t=e.target;"user_phone"===t.name&&(t.style&&(t.style.border="none"),t.value=t.value.replace(/[^\+\d]/g,""),/^\+?(\d){0,18}$/g.test(t.value)||(t.value=t.value.substring(0,t.value.length-1))),"user_name"!==t.name&&"user_message"!==t.name||(t.value=t.value.replace(/[^а-я ]/gi,""))})),e.addEventListener("submit",(r=>{r.preventDefault();const n=[...r.target.elements].filter((e=>"user_phone"===e.name));if((a=n)[0].value.replace("+","").length<8&&(((e,t)=>{let o=e.parentNode;if(o=o.querySelector(".input-error"),o)return;e.style.border="2px solid red",e.insertAdjacentHTML("beforebegin",'<div class="input-error" style="color: red;">Минимум 8 цифр</div>');const r=document.querySelector(".input-error");setTimeout((()=>{r.remove(),e.removeAttribute("style")}),5e3)})(a[0]),1))return;var a;e.appendChild(t),t.style.cssText="font-size: 2rem;\n              color: #fff; ";const s=new FormData(e);t.textContent="Загрузка...";let l={};for(let e of s.entries())l[e[0]]=e[1];(e=>(console.log("body: ",e),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"})))(l).then((r=>{if(200!==r.status)throw"error !!! ";t.style.cssText="font-size: 2rem;\n              color: green; ",o(),t.textContent="Спасибо! Мы с вами свяжемся!",e.reset()})).catch((()=>{t.style.cssText="font-size: 2rem;\n              color: red; ",o(),t.textContent="Что то пошло не так..."}))}))}))})()})();